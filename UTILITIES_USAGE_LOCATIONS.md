# 📍 새로 만든 유틸리티가 표시되는 화면 위치

## ✅ 현재 실제로 사용 중인 화면

### 1. **environmentalImpact.js** - 환경 기여도 계산

#### 📱 표시 위치: **지도 탭 → 녹지시설 마커 클릭 → LocationModal**

**어디에 나오나요?**
- 지도에서 공원/산책로/쉼터 마커를 클릭하면 나오는 상세정보 모달
- 모달 내부의 **"나의 환경 기여도"** 섹션에 표시됩니다

**표시되는 내용:**
```
┌─────────────────────────────────┐
│ 📊 나의 환경 기여도              │
├─────────────────────────────────┤
│ 오늘 절감한 CO2                 │
│ 1.05kg                          │
│ "대단해요! 3개 습관으로..."     │
│                                 │
│ [나무 흡수량] [자동차 주행 절약]│
│   19.1그루        8.8km        │
│                                 │
│ "이 장소에서 2.4g 추가 효과!"   │
└─────────────────────────────────┘
```

**코드 위치:**
- `src/components/Map/LocationModal.jsx` (199-244줄)
- `calculateLocationImpact()` 함수 사용

---

### 2. **habitLocationMapper.js** - 습관별 맞춤 추천

#### 📱 표시 위치: **지도 탭 → 녹지시설 마커 클릭 → LocationModal**

**어디에 나오나요?**
- 지도에서 공원/산책로/쉼터 마커를 클릭하면 나오는 상세정보 모달
- 모달 내부의 **"이 장소에서 실천할 수 있는 습관"** 섹션에 표시됩니다

**표시되는 내용:**
```
┌─────────────────────────────────┐
│ 이 장소에서 실천할 수 있는 습관  │
├─────────────────────────────────┤
│ [텀블러 사용하기] [걷기]        │
│ [공원 방문하기] [에너지 절약]   │
└─────────────────────────────────┘
```

**코드 위치:**
- `src/components/Map/LocationModal.jsx` (248-263줄)
- `getHabitsForLocation()` 함수 사용

**⚠️ 아직 통합 안 된 부분:**
- `App.jsx`에서는 아직 기존 `getRecommendedLocations()` 사용 중
- 새로운 `getRecommendedLocationsByHabits()`는 아직 사용 안 됨
- → 지도 상단의 "추천 장소 알림"은 아직 기존 로직 사용

---

### 3. **specialLocations.js** - 스트릭 기반 특별 장소

#### 📱 표시 위치 1: **지도 탭 → 지도 위 마커**

**어디에 나오나요?**
- 지도 위의 녹지시설 마커에 특별 표시
- 스트릭이 3일 이상이면 특별 마커로 표시됨

**표시되는 내용:**
- **3일 이상 (브론즈)**: 마커에 ⭐ 아이콘 표시
- **7일 이상 (실버)**: 마커에 👑 아이콘 표시
- **14일 이상 (골드)**: 마커에 🏆 아이콘 표시

**코드 위치:**
- `src/components/Map/GreenMap.jsx` (275줄)
- `getSpecialLocationInfo()` 함수 사용

#### 📱 표시 위치 2: **지도 탭 → 녹지시설 마커 클릭 → LocationModal**

**어디에 나오나요?**
- 특별 장소를 클릭했을 때 모달 상단에 특별 배지 표시

**표시되는 내용:**
```
┌─────────────────────────────────┐
│ 광교 호수공원          [🏆 골드] │
│ 프리미엄 명소                    │
│ "14일 연속 달성! 레전드 명소..." │
└─────────────────────────────────┘
```

**코드 위치:**
- `src/components/Map/LocationModal.jsx` (26-27줄)
- `getSpecialLocationInfo()`, `getStreakProgress()` 함수 사용

---

## ❌ 아직 통합되지 않은 기능

### 1. **습관별 맞춤 추천 (App.jsx)**
- 현재: 기존 `getRecommendedLocations()` 사용 (개수 기반)
- 새로운: `getRecommendedLocationsByHabits()` 사용 안 됨
- 영향: 지도 상단의 "추천 장소 알림"이 아직 개수 기반으로 작동

### 2. **스트릭 축하 모달 (TrackerPage)**
- `getStreakCelebration()` 함수는 만들어졌지만 아직 사용 안 됨
- 티어 달성 시 축하 모달이 표시되지 않음

### 3. **스트릭 진행 상황 (StatsPage)**
- `getStreakProgress()` 함수는 만들어졌지만 StatsPage에 표시 안 됨
- 해금된 특별 장소 목록도 표시 안 됨

---

## 🗺️ 화면별 표시 위치 요약

### 📍 지도 탭 (MapPage)

1. **지도 위 마커**
   - ✅ 특별 장소 마커 (스트릭 3일 이상)
   - ✅ 추천 장소 마커 (황금색, 펄스 애니메이션)
   - 사용: `specialLocations.js` → `getSpecialLocationInfo()`

2. **상단 추천 알림 배너**
   - ⚠️ 아직 기존 로직 사용 (`mapIntegration.js`)
   - 새로운 `habitLocationMapper.js` 미사용

3. **마커 클릭 → LocationModal**
   - ✅ "나의 환경 기여도" 섹션
     - CO2 절감량, 나무 흡수량, 자동차 주행 절약
     - 사용: `environmentalImpact.js` → `calculateLocationImpact()`
   
   - ✅ "이 장소에서 실천할 수 있는 습관" 섹션
     - 사용: `habitLocationMapper.js` → `getHabitsForLocation()`
   
   - ✅ 특별 장소 배지 (스트릭 3일 이상)
     - 사용: `specialLocations.js` → `getSpecialLocationInfo()`

### 📍 습관 트래커 탭 (TrackerPage)

- ❌ 티어 달성 축하 모달 없음
- ❌ 스트릭 진행 상황 표시 없음
- → `specialLocations.js`의 `getStreakCelebration()` 미사용

### 📍 통계/기록 탭 (StatsPage)

- ❌ 스트릭 진행 상황 바 없음
- ❌ 해금된 특별 장소 목록 없음
- → `specialLocations.js`의 `getStreakProgress()`, `getUnlockedSpecialLocations()` 미사용

---

## 🎯 실제로 보는 방법

### 1. 환경 기여도 보기
1. 앱 실행
2. **지도 탭** 클릭
3. 지도 위의 **녹지시설 마커** (공원/산책로/쉼터) 클릭
4. 모달이 열리면 아래로 스크롤
5. **"나의 환경 기여도"** 섹션 확인
   - ⚠️ **습관을 먼저 완료해야 표시됨!**
   - 습관 트래커 탭에서 습관을 체크한 후 지도로 돌아와야 함

### 2. 이 장소에서 할 수 있는 습관 보기
1. 지도 탭에서 **녹지시설 마커** 클릭
2. 모달에서 **"이 장소에서 실천할 수 있는 습관"** 섹션 확인
3. 녹색 배지로 표시된 습관 목록 확인

### 3. 특별 장소 마커 보기
1. **습관 트래커 탭**에서 습관을 **3일 이상 연속으로 완료**
2. **지도 탭**으로 이동
3. 지도 위의 마커에 **⭐, 👑, 🏆 아이콘** 확인
   - 3일 이상: ⭐ (브론즈)
   - 7일 이상: 👑 (실버)
   - 14일 이상: 🏆 (골드)

---

## 💡 주의사항

1. **환경 기여도는 습관을 완료해야 표시됨**
   - 습관 트래커에서 습관을 체크하지 않으면 "나의 환경 기여도" 섹션이 안 보임

2. **특별 장소는 스트릭이 필요함**
   - 최소 3일 연속 달성해야 특별 마커가 표시됨
   - 스트릭이 0일이면 일반 마커만 표시

3. **추천 장소는 아직 기존 로직 사용**
   - 지도 상단의 "추천 장소 알림"은 아직 개수 기반
   - 습관별 맞춤 추천으로 바꾸려면 `App.jsx` 수정 필요

---

## 🔧 통합이 필요한 부분

### 즉시 통합 가능:
1. **App.jsx**: `getRecommendedLocations()` → `getRecommendedLocationsByHabits()` 변경
2. **TrackerPage.jsx**: 티어 달성 축하 모달 추가
3. **StatsPage.jsx**: 스트릭 진행 상황 및 해금된 장소 표시

이 부분들을 통합하면 더 완성도 높은 앱이 됩니다!

---

**작성일**: 2024년
**최종 업데이트**: 현재

